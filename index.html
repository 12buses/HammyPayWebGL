<!DOCTYPE html>
<html lang="en-us" style="height: 100%; margin: 0;">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Hammy Pay</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <style>
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        #unity-container {
            width: 390px;
            height: 844px;
            position: relative;
            background: #000;
        }
        
        #unity-canvas {
            width: 100% !important;
            height: 100% !important;
        }
        
        /* Скрываем все дополнительные элементы */
        #unity-loading-bar,
        #unity-footer,
        #unity-warning,
        #unity-fullscreen-button {
            display: none !important;
        }
        
        @media (orientation: landscape) {
            #unity-container {
                width: 844px;
                height: 390px;
            }
        }
    </style>
</head>
<body>
    <div id="unity-container">
        <canvas id="unity-canvas" tabindex="-1"></canvas>
    </div>
    <script>
        var container = document.querySelector("#unity-container");
        var canvas = document.querySelector("#unity-canvas");
        var config = {
            dataUrl: "Build/HammyPayWeGL1.0.data",
            frameworkUrl: "Build/HammyPayWeGL1.0.framework.js",
            codeUrl: "Build/HammyPayWeGL1.0.wasm",
            streamingAssetsUrl: "StreamingAssets",
            companyName: "IteenAcademy",
            productName: "Hammy Pay",
            productVersion: "3.2.2",
            matchWebGLToCanvasSize: true,
            devicePixelRatio: 3 // Retina display
        };

        var script = document.createElement("script");
        script.src = "Build/HammyPayWeGL1.0.loader.js";
        script.onload = () => {
            createUnityInstance(canvas, config)
                .then((unityInstance) => {
                    // Автоматическое переключение ориентации
                    function handleResize() {
                        if (window.matchMedia("(orientation: portrait)").matches) {
                            container.style.width = "390px";
                            container.style.height = "844px";
                        } else {
                            container.style.width = "844px";
                            container.style.height = "390px";
                        }
                    }
                    
                    window.addEventListener('resize', handleResize);
                    handleResize();

                    // Попытка полноэкранного режима
                    const requestFullscreen = () => {
                        try {
                            if (canvas.requestFullscreen) {
                                canvas.requestFullscreen();
                            } else if (canvas.webkitRequestFullscreen) {
                                canvas.webkitRequestFullscreen();
                            }
                        } catch(e) {
                            console.log("Fullscreen error:", e);
                        }
                    };
                    
                    // Активация по клику (требование браузеров)
                    canvas.addEventListener('click', requestFullscreen);
                })
                .catch((message) => {
                    console.error(message);
                });
        };
        document.body.appendChild(script);
    </script>
</body>
</html>